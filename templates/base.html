<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>{% block title %}üçÖ D·ª∞ ƒêO√ÅN B·ªÜNH TR√äN L√Å C√Ä CHUA{% endblock %}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
  <link rel="icon" href="{{ url_for('static', filename='images/tomato.svg') }}">
  <style>
    /* Container Adjustment */
    .container {
      padding-top: 20px !important;
    }
    
    /* Single Line Header */
    .site-header-wrapper {
      background: white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-bottom: 0;
      position: sticky;
      top: 0;
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 20px;
      gap: 30px;
    }
    
    [data-theme="dark"] .site-header-wrapper {
      background: var(--bg-secondary);
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    
    .site-brand {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-shrink: 0;
    }
    
    .site-brand img {
      width: 35px;
      height: 35px;
    }
    
    .site-brand h1 {
      margin: 0;
      font-size: 1.15em;
      color: var(--tomato-700);
      font-weight: 700;
      letter-spacing: 0.3px;
      white-space: nowrap;
    }
    
    [data-theme="dark"] .site-brand h1 {
      color: var(--tomato-400);
    }
    
    .site-navigation {
      display: flex;
      justify-content: flex-end;
      flex-wrap: wrap;
      gap: 3px;
      flex: 1;
    }
    
    .site-navigation .nav-link {
      padding: 7px 12px;
      font-size: 0.82rem;
      border-radius: 8px;
    }
    
    .site-navigation .nav-link:hover {
      transform: translateY(-1px);
    }
    
    .site-navigation .nav-link svg {
      width: 16px;
      height: 16px;
    }
    
    @media (max-width: 1100px) {
      .site-brand h1 {
        font-size: 1em;
      }
      
      .site-navigation .nav-link {
        padding: 6px 10px;
        font-size: 0.78rem;
      }
    }
    
    @media (max-width: 768px) {
      .site-header-wrapper {
        flex-direction: column;
        padding: 10px;
        gap: 10px;
      }
      
      .site-brand {
        justify-content: center;
      }
      
      .site-brand h1 {
        font-size: 0.95em;
      }
      
      .site-brand img {
        width: 30px;
        height: 30px;
      }
      
      .site-navigation {
        justify-content: center;
        width: 100%;
      }
      
      .site-navigation .nav-link {
        padding: 6px 8px;
        font-size: 0.75rem;
        gap: 4px;
      }
    }
    
    /* Toast Notification System */
    .toast-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-width: 400px;
    }
    
    .toast {
      background: white;
      padding: 16px 20px;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
      display: flex;
      align-items: center;
      gap: 12px;
      animation: slideIn 0.3s ease;
      border-left: 4px solid;
      min-width: 300px;
      position: relative;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .toast:hover {
      transform: translateX(-5px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    
    .toast-success { border-left-color: #4CAF50; }
    .toast-error { border-left-color: #f44336; }
    .toast-warning { border-left-color: #ff9800; }
    .toast-info { border-left-color: #2196F3; }
    
    .toast-icon {
      font-size: 24px;
      flex-shrink: 0;
    }
    
    .toast-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    
    .toast-title {
      font-weight: 600;
      color: #333;
      font-size: 0.95rem;
    }
    
    .toast-message {
      color: #666;
      font-size: 0.85rem;
      line-height: 1.4;
    }
    
    .toast-close {
      background: none;
      border: none;
      font-size: 20px;
      color: #999;
      cursor: pointer;
      padding: 0;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: background 0.2s, color 0.2s;
    }
    
    .toast-close:hover {
      background: #f0f0f0;
      color: #333;
    }
    
    .toast-progress {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 3px;
      background: currentColor;
      opacity: 0.3;
      animation: progress 5s linear;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    @keyframes slideOut {
      to {
        transform: translateX(400px);
        opacity: 0;
      }
    }
    
    @keyframes progress {
      from { width: 100%; }
      to { width: 0%; }
    }
    
    .toast.removing {
      animation: slideOut 0.3s ease forwards;
    }
    
    @media (max-width: 480px) {
      .toast-container {
        left: 10px;
        right: 10px;
        top: 10px;
        max-width: none;
      }
      .toast {
        min-width: auto;
      }
    }
  </style>
  {% block head %}{% endblock %}
</head>
<body>
  <!-- Toast Notification Container -->
  <div id="toast-container" class="toast-container"></div>
  
  <!-- Single Line Header with Brand and Navigation -->
  <div class="site-header-wrapper">
    <div class="site-brand">
      <img src="{{ url_for('static', filename='images/tomato.svg') }}" alt="logo">
      <h1>üçÖ D·ª∞ ƒêO√ÅN B·ªÜNH TR√äN L√Å C√Ä CHUA</h1>
    </div>
    
    <nav class="site-navigation">
      <a href="{{ url_for('index') }}" class="nav-link">
        <svg style="width:18px;height:18px;fill:currentColor;" viewBox="0 0 24 24">
          <path d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z" />
        </svg>
        <span>Trang ch·ªß</span>
      </a>
      <a href="{{ url_for('compare') }}" class="nav-link">
        <svg style="width:18px;height:18px;fill:currentColor;" viewBox="0 0 24 24">
          <path d="M19,3H14V5H19V18L14,12V21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M10,18H5L10,12M10,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H10V23H12V1H10V3Z" />
        </svg>
        <span>So s√°nh</span>
      </a>
      <a href="{{ url_for('about_page') }}" class="nav-link">
        <svg style="width:18px;height:18px;fill:currentColor;" viewBox="0 0 24 24">
          <path d="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" />
        </svg>
        <span>Gi·ªõi thi·ªáu</span>
      </a>
      <a href="{{ url_for('chat') }}" class="nav-link">
        <svg style="width:18px;height:18px;fill:currentColor;" viewBox="0 0 24 24">
          <path d="M12,3C6.5,3 2,6.58 2,11A7.18,7.18 0 0,0 5.5,17.21C5.5,17.21 5,19 5,21C7,20 8.5,19 8.5,19C9.5,19.25 10.5,19.5 12,19.5C17.5,19.5 22,15.92 22,11.5C22,6.58 17.5,3 12,3M12,17C7.58,17 4,14.31 4,11C4,7.69 7.58,5 12,5C16.42,5 20,7.69 20,11C20,14.31 16.42,17 12,17Z" />
        </svg>
        <span>H·ªèi ƒë√°p</span>
      </a>
      <a href="{{ url_for('webcam') }}" class="nav-link">
        <svg style="width:18px;height:18px;fill:currentColor;" viewBox="0 0 24 24">
          <path d="M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z" />
        </svg>
        <span>Webcam</span>
      </a>
      <a href="{{ url_for('history') }}" class="nav-link">
        <svg style="width:18px;height:18px;fill:currentColor;" viewBox="0 0 24 24">
          <path d="M13.5,8H12V13L16.28,15.54L17,14.33L13.5,12.25V8M13,3A9,9 0 0,0 4,12H1L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3" />
        </svg>
        <span>L·ªãch s·ª≠</span>
      </a>
      <a href="{{ url_for('game_menu') }}" class="nav-link">
        <svg style="width:18px;height:18px;fill:currentColor;" viewBox="0 0 24 24">
          <path d="M16.97,5.17C16.45,5.06 15.92,5 15.38,5C13.5,5 11.69,5.67 10.26,6.87L9.67,7.37L9.13,6.83L8.13,5.83L8.66,5.28C10.39,3.58 12.75,2.58 15.25,2.58C16,2.58 16.73,2.67 17.43,2.85L17,3.28L16.97,5.17M11.91,7.79C13.07,6.82 14.5,6.3 16,6.3C16.33,6.3 16.66,6.34 17,6.39V7.91L19.23,5.68C19.9,6.5 20.38,7.5 20.63,8.58L18.83,10.38C18.5,9.5 17.91,8.69 17.13,8.12L15.97,9.28L13.97,7.28L11.91,7.79M6.79,7.79L5,9.58C5,11.5 5.74,13.37 7.05,14.79L11.26,10.58L10.26,9.58L6.79,7.79M10.59,11.38L6.38,15.58L7.79,17C9.21,18.26 11.08,19 13,19C13.69,19 14.37,18.9 15.03,18.71L14.5,18.18L12.5,16.18L10.59,11.38M16.36,15.55C16.92,15.21 17.44,14.8 17.9,14.32L18.92,15.34L17.97,16.29C17.45,16.81 16.89,17.25 16.28,17.63L15.97,17.79V16.18L16.36,15.55Z" />
        </svg>
        <span>Gi·∫£i tr√≠</span>
      </a>
      <a href="{{ url_for('admin_feedback') }}" class="nav-link">
        <svg style="width:18px;height:18px;fill:currentColor;" viewBox="0 0 24 24">
          <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" />
        </svg>
        <span>Qu·∫£n l√Ω</span>
      </a>
    </nav>
  </div>
  
  <div class="container">

    {% block content %}{% endblock %}

    <footer class="footer">
      &copy; 2025 Tomato AI | D·ª± √°n th·ª≠ nghi·ªám. <br><i>B·∫£n quy·ªÅn thu·ªôc v·ªÅ Nguy·ªÖn Th√†nh Trung &amp; V√µ C√¥ng ƒêo√†n</i>
    </footer>
  </div>
  
  <!-- Dark Mode Toggle Button -->
  <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
    <svg id="theme-icon-sun" style="display: none;" viewBox="0 0 24 24" fill="currentColor">
      <path d="M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,2L14.39,5.42C13.65,5.15 12.84,5 12,5C11.16,5 10.35,5.15 9.61,5.42L12,2M3.34,7L7.5,6.65C6.9,7.16 6.36,7.78 5.94,8.5C5.5,9.24 5.25,10 5.11,10.79L3.34,7M3.36,17L5.12,13.23C5.26,14 5.53,14.78 5.95,15.5C6.37,16.24 6.91,16.86 7.5,17.37L3.36,17M20.65,7L18.88,10.79C18.74,10 18.47,9.23 18.05,8.5C17.63,7.78 17.1,7.15 16.5,6.64L20.65,7M20.64,17L16.5,17.36C17.09,16.85 17.62,16.22 18.04,15.5C18.46,14.77 18.73,14 18.87,13.21L20.64,17M12,22L9.59,18.56C10.33,18.83 11.14,19 12,19C12.82,19 13.63,18.83 14.37,18.56L12,22Z" />
    </svg>
    <svg id="theme-icon-moon" viewBox="0 0 24 24" fill="currentColor">
      <path d="M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.87 20.69,17.05 20.16,17.8C19.84,18.25 19.5,18.67 19.08,19.07C15.17,23 8.84,23 4.94,19.07C1.03,15.17 1.03,8.83 4.94,4.93C5.34,4.53 5.76,4.17 6.21,3.85C6.96,3.32 8.14,4.21 8.06,5.04C7.79,7.9 8.75,10.87 10.95,13.06C13.14,15.26 16.1,16.22 18.97,15.95M17.33,17.97C14.5,17.81 11.7,16.64 9.53,14.5C7.36,12.31 6.2,9.5 6.04,6.68C3.23,9.82 3.34,14.64 6.35,17.66C9.37,20.67 14.19,20.78 17.33,17.97Z" />
    </svg>
  </button>
  
  <script>
    // Dark Mode Toggle System
    (function() {
      const themeToggle = document.getElementById('theme-toggle');
      const sunIcon = document.getElementById('theme-icon-sun');
      const moonIcon = document.getElementById('theme-icon-moon');
      const htmlElement = document.documentElement;
      
      // Load saved theme or default to light
      const savedTheme = localStorage.getItem('theme') || 'light';
      
      function setTheme(theme) {
        htmlElement.setAttribute('data-theme', theme);
        localStorage.setItem('theme', theme);
        
        if (theme === 'dark') {
          sunIcon.style.display = 'block';
          moonIcon.style.display = 'none';
        } else {
          sunIcon.style.display = 'none';
          moonIcon.style.display = 'block';
        }
      }
      
      // Set initial theme
      setTheme(savedTheme);
      
      // Toggle theme on button click
      themeToggle.addEventListener('click', () => {
        const currentTheme = htmlElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        setTheme(newTheme);
        
        // Show toast notification
        showToast('success', `${newTheme === 'dark' ? 'üåô Dark' : '‚òÄÔ∏è Light'} mode activated`);
      });
    })();
    
    // Toast Notification System
    const ToastManager = {
      container: null,
      
      init() {
        this.container = document.getElementById('toast-container');
        // Convert Flask flash messages to toasts
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              this.show('{{ message|safe }}', '{{ category }}');
            {% endfor %}
          {% endif %}
        {% endwith %}
      },
      
      show(message, type = 'info', duration = 5000) {
        const icons = {
          success: '‚úÖ',
          error: '‚ùå',
          warning: '‚ö†Ô∏è',
          info: '‚ÑπÔ∏è'
        };
        
        const titles = {
          success: 'Th√†nh c√¥ng',
          error: 'L·ªói',
          warning: 'C·∫£nh b√°o',
          info: 'Th√¥ng b√°o'
        };
        
        const toast = document.createElement('div');
        toast.className = `toast toast-${type}`;
        toast.innerHTML = `
          <div class="toast-icon">${icons[type] || icons.info}</div>
          <div class="toast-content">
            <div class="toast-title">${titles[type] || titles.info}</div>
            <div class="toast-message">${message}</div>
          </div>
          <button class="toast-close" onclick="ToastManager.remove(this.parentElement)">&times;</button>
          ${duration > 0 ? '<div class="toast-progress" style="color: ' + this.getColor(type) + '"></div>' : ''}
        `;
        
        this.container.appendChild(toast);
        
        // Auto remove after duration
        if (duration > 0) {
          setTimeout(() => this.remove(toast), duration);
        }
        
        // Click to dismiss
        toast.addEventListener('click', (e) => {
          if (e.target !== toast.querySelector('.toast-close')) {
            this.remove(toast);
          }
        });
        
        return toast;
      },
      
      getColor(type) {
        const colors = {
          success: '#4CAF50',
          error: '#f44336',
          warning: '#ff9800',
          info: '#2196F3'
        };
        return colors[type] || colors.info;
      },
      
      remove(toast) {
        toast.classList.add('removing');
        setTimeout(() => {
          if (toast.parentElement) {
            toast.parentElement.removeChild(toast);
          }
        }, 300);
      },
      
      success(message, duration = 5000) {
        return this.show(message, 'success', duration);
      },
      
      error(message, duration = 7000) {
        return this.show(message, 'error', duration);
      },
      
      warning(message, duration = 6000) {
        return this.show(message, 'warning', duration);
      },
      
      info(message, duration = 5000) {
        return this.show(message, 'info', duration);
      }
    };
    
    // Initialize on page load
    document.addEventListener('DOMContentLoaded', () => {
      ToastManager.init();
    });
    
    // Make it globally accessible
    window.toast = ToastManager;
  </script>
  
  {% block scripts %}{% endblock %}
</body>
</html>